{% extends "base.html" %}
{% load form_filters %}
{% block title %}Meu Perfil | Blog{% endblock %}

{% block content %}

<!-- üîπ HERO -->
<section class="text-center mb-5">
    <h1 class="fw-bold"><i class="fas fa-user-circle me-2"></i>Meu Perfil</h1>
    <p class="text-muted">Atualize suas informa√ß√µes e visualize seus coment√°rios</p>
</section>

<div class="row g-4">

    <!-- üîπ FORMUL√ÅRIO DE EDI√á√ÉO -->
    <div class="col-lg-6">
        <div class="p-4 shadow-sm rounded bg-white h-100">
            <h2 class="h5 mb-4 text-primary"><i class="fas fa-edit me-2"></i>Editar Perfil</h2>

            <form method="post" enctype="multipart/form-data" novalidate>
                {% csrf_token %}
                {{ form.non_field_errors }}

                <!-- Nome completo -->
                <div class="form-floating mb-3">
                    {{ form.full_name|add_class:"form-control" }}
                    <label for="{{ form.full_name.id_for_label }}">
                        <i class="fas fa-id-card me-1"></i> Nome completo
                    </label>
                    {{ form.full_name.errors }}
                </div>

                <!-- Foto de perfil -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        <i class="fas fa-image me-1"></i> Foto de perfil
                    </label>
                    {{ form.photo|add_class:"form-control" }}
                    {{ form.photo.errors }}
                </div>

                <!-- Data de nascimento -->
                <div class="form-floating mb-3">
                    {{ form.birth_date|add_class:"form-control" }}
                    <label for="{{ form.birth_date.id_for_label }}">
                        <i class="fas fa-calendar-alt me-1"></i> Data de nascimento
                    </label>
                    {{ form.birth_date.errors }}
                </div>

                <!-- G√™nero -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        <i class="fas fa-venus-mars me-1"></i> G√™nero
                    </label>
                    {{ form.gender|add_class:"form-select" }}
                    {{ form.gender.errors }}
                </div>

                <!-- Bot√£o -->
                <button type="submit" class="btn btn-primary w-100 rounded-pill">
                    <i class="fas fa-save me-2"></i>Salvar Altera√ß√µes
                </button>
            </form>
        </div>
    </div>

    <!-- üîπ COMENT√ÅRIOS DO USU√ÅRIO -->
    <!--    <div class="col-lg-6">-->
    <!--        <div class="p-4 shadow-sm rounded bg-light h-100">-->
    <!--            <h2 class="h5 mb-4 text-secondary">-->
    <!--                <i class="fas fa-comments me-2"></i>Meus Coment√°rios-->
    <!--            </h2>-->

    <!--            {% if comments %}-->
    <!--            {% for comment in comments %}-->
    <!--            <div class="comment-box mb-3 p-3 bg-white rounded shadow-sm">-->
    <!--                <small class="text-muted d-block mb-1">-->
    <!--                    <i class="fas fa-calendar me-1"></i> {{ comment.created_at|date:"d M Y, H:i" }}-->
    <!--                </small>-->
    <!--                <strong class="d-block text-primary">Post:</strong>-->
    <!--                <p class="mb-1">{{ comment.post.title }}</p>-->
    <!--                <hr class="my-2">-->
    <!--                <p class="mb-0">{{ comment.content|linebreaks }}</p>-->
    <!--            </div>-->
    <!--            {% endfor %}-->
    <!--            {% else %}-->
    <!--            <p class="text-muted text-center">Voc√™ ainda n√£o comentou nenhum post.</p>-->
    <!--            {% endif %}-->
    <!--        </div>-->
    <!--    </div>-->
    <div class="col-lg-6">
        <div class="p-4 shadow-sm rounded bg-light h-100">
            <h2 class="h5 mb-4 text-secondary">
                <i class="fas fa-comments me-2"></i> Meus Coment√°rios
            </h2>

            {% if comments %}
            {% for comment in comments %}
            <div class="comment-box mb-3 p-3 bg-white rounded shadow-sm">

                <!-- Data alinhada -->
                <div class="mb-2">
                    <small class="text-muted">
                        <i class="fas fa-calendar-alt me-1"></i>
                        {{ comment.created_at|date:"d M Y, H:i" }}
                    </small>
                </div>

                <!-- Post relacionado -->
                <div class="mb-2">
                    <span class="fw-semibold text-primary">
                        <i class="fas fa-link me-1"></i> Post:
                    </span>
                    <span class="text-dark">{{ comment.post.title }}</span>
                </div>

                <!-- Linha divis√≥ria -->
                <hr class="my-2">

                <!-- Conte√∫do do coment√°rio -->
                <div class="ps-2 border-start border-2">
                    <p class="mb-0 text-dark">
                        {{ comment.content|linebreaks }}
                    </p>
                </div>

            </div>
            {% endfor %}
            {% else %}
            <p class="text-muted text-center">
                Voc√™ ainda n√£o comentou nenhum post.
            </p>
            {% endif %}
        </div>
    </div>

</div>

{% endblock %}
